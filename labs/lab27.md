# Лабораторная работа №7

Реализация Middleware в приложении Express.js

**Цель**: изучить написание собственного промежуточного ПО и использование стороннего в Express.js для добавления функциональности в веб-приложения.

## Содержание и порядок выполнения лабораторной работы

1. Повторить цикл запрос-ответ в http.
1. Изучить концепцию промежуточного ПО, его назначение в жизненном цикле веб-приложения.
1. Изучить порядок выполнения промежуточного ПО на уровне приложений и промежуточным ПО на уровне маршрутов.
1. Используйте существующее приложение Express.js.
1. Написать не менее двух функций промежуточного ПО: для проверки пользовательского ввода перед отправкой ответа и для авторизации по ключу API в URL параметрах.
1. Использовать как минимум две популярные библиотеки промежуточного ПО, такие как morgan для ведения журнала и [helmet](https://expressjs.com/ru/advanced/best-practice-security.html) для работы с заголовками ответа.
1. В файлах маршрутизации и контроллеров используйте написанные функции промежуточного ПО и стороннее промежуточное ПО.
1. Протестируйте каждую функцию промежуточного ПО и убедитесь, что она работает так, как ожидается.

## Требования

1. Реализовано не менее трех различных функций промежуточного ПО.
1. Функции промежуточного ПО выполняют различные задачи.
1. При необходимости реализованы пользовательские функции промежуточного ПО.
1. Промежуточное ПО используется как минимум в двух различных маршрутах приложения.

## Результаты выполнения лабораторной работы:

Работающий локально сервер с логикой, которая соответствует требованиям. Код сохранен в системе контроля версий.

## Источники

1. [Документация по промежуточному ПО Express.js](https://expressjs.com/ru/guide/using-middleware.html)
1. [Как работает Middleware в Express?](https://habr.com/ru/companies/otus/articles/562914/)
1. [Написание промежуточного ПО для использования в приложениях Express](https://developer.mozilla.org/en-US/docs/Learn/Server-side/Express_Nodejs/Introduction#Writing_middleware_for_use_in_Express_apps)
1. [Официальный сайт Node](https://nodejs.org/en/)
1. [Введение в Node на английском](https://nodejs.dev/en/learn/)
1. [Введение в Node на русском](https://nodejsdev.ru/guides/)
1. [Руководство по Node на русском (PDF)](https://ruvds.com/img/other/ee86eb4f-db9f-48d3-8094-c76e14414678.pdf)
1. [Курс по Node](https://habr.com/ru/post/485294/)

## Вопросы

1. В чем заключается концепция промежуточного ПО (middleware)?
1. Для чего нужна функция next в middleware?
1. Как устанавливаются middleware уровня приложения и уровня маршрутизатора?
1. Как установить middleware на отдельный путь и метод?
1. Какие параметры и как работает middleware предназначенный для обработки ошибок?
1. Какие есть отрицательные стороны у использования middleware?