# Практический рубежный контроль

## Главные требования

1. Работа выполнена самостоятельно.
1. Работа написана во время занятия.
1. Не менее трех коммитов за авторством студента, равномерно распределенных по времени выполнения задания.
1. Работа размещена на удаленном репозитории на Github, который создан через Github Classroom. (Без этого работа не проверяется)

## Задание

1. Принять задание по ссылке на [Github Classroom](https://classroom.github.com/a/4DkgcneI)
2. Клонировать репозиторий, который был создан после принятия задания.
3. Финальный вариант когда с историей работы, должен быть в этом репозитории.
4. Проект инициализирован с помощью команды `npm init`. Имя проекта RK, имя автора - ваше имя.
5. Для запуска сервера есть скрипт с именем start в файле package.json.
6. Проект содержит файл .gitignore с нужными исключениями для node.js.
7. Реализована серверная логика с использованием node.js и express по варианту.
8. Проект структурирован: routes, controllers, services, middlewares, configs.
9. Сервер запускается на порту 5500.
10. Все запросы логируются в консоль. Можно использовать стороннее промежуточное ПО.
12. Есть промежуточное ПО для обработки ошибок, возникающих на стороне сервера и отправляющее сообщению клиенту со статусом 500.
13. Есть промежуточное ПО, которое обрабатывает запросы на несуществующие конечные точки (end points) и отправляет ответ со статусом 400.
14. Есть промежуточное ПО проверяющее наличие заголовка `Content-Type` и что он содержит `application/json`, а также на наличие нужных данных в теле запроса согласно варианту, в противном случае отправить ответ `{status: "error", message: "Неверные данные"}` с кодом 400.
15. Для хранения данных используется субд MongoDB, сервер которой работает на порту 27017.

**Важно**: Используйте имена свойств в объектах, такие как приведены в варианта, так как они будут использоваться для тестирования на работоспособность ваших работ.

## Варианты

### 1. Книги

**POST /authors** - добавить нового автора.

Данные:
```
{
    name: string // имя автора
}
```

**POST /authors/:id/books** - добавить новую книгу автора.

Данные:
```
{
    title: string, // название книги
    year: number, // год издания 
    series: string // серия
}
```

**GET /authors/:id/books** - получить все книги одного автора, сгруппированных по сериям.

Данные:
```
[
    {genre: string,[{name: string, year: number},{name: string, year: number}]},
    {genre: string,[{name: string, year: number},{name: string, year: number}]},
    …
]
```

### 2. Бонсай

**POST /trees** - добавить новое дерево.

Данные:
```
{
    type: string, // вид
    age: number, // возраст
    height: number // высота
}
```

**GET /trees?key=value&key=value** - получение деревьев, удовлетворяющим фильтрам из query-параметров. Если key нет среди полей документа (вид, возраст, высота) вернуть ошибку, в противном случае вернуть список удовлетворяющий критериям. Если совпадений нет, то вернуть пустой массив.

Данные:
```
[
    {type: string, age: number, height: number},
    {type: string, age: number, height: number}
    …
]
```

### 3. 3D-печать

**POST /orders** - добавить новый заказ.

Данные:
```
{
    name: string, // имя модели
    priority: [express, normal], // cрочность: обычный, срочный
    material: [pla, abs] // Вид пластика: PLA, ABS
}
```

**GET /orders?sort=value** - получить заказы, отсортированные по материалу или срочности. Если неверный query-параметр, то возвращается список отсортированный по имени.

Данные:
```
[
    {name: string, priority: express, material: abs},
    {name: string, priority: normal, material: pla},
    …
]
```

### 4. Лакросс

**POST /teams** - добавить команду.

Данные:
```
{
    teamName: string, // имя команды
    city: string // город
}
```

**POST /players** - добавить игрока. Если команды нет в базе данных, то вернуть сообщение об ошибке, если есть, то добавить игрока к этой команде.

Данные:
```
{
    teamName: string, // имя команды
    playerName: string, // имя игрока
    position: [off, def] // позиция игрока
}
```

**GET /teams/:id** - получить полную информацию о команде.

Данные:
```
{
    teamName: string, // имя команды
    city: string, // город
    players: {def: number, off: number} // количество игроков по позициям
}
```

### 5. Космический туризм

**POST /trips** - добавить путешествие.

Данные:
{
    destination: string, // направление
    spotNumber: number, // количество мест
    date: date // дата начала
}

**POST /trips/:id/passengers** - добавить туриста к путешествию. Если все места уже заняты, то туриста не добавлять и вернуть сообщение об ошибке.

Данные:
```
 {name: string // имя туриста}
```

**GET /trips/:id** - получить информацию о путешествии и список всех пассажиров.

Данные:
```
{
    destination: string, // направление
    spotsLeft: number, // количество оставшихся мест
    passengers: [{name: string},{name: string}…] // список пассажиров
}
```