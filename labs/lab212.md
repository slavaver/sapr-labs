# Лабораторная работа №12

Редактирование и сохранение модели

**Цель**: закрепить знания по работе с AJAX, добавив в проект работу с формой и задействуя оставшиеся конечные точки разработанного API.

## Содержание и порядок выполнения лабораторной работы

### Новая модель

1. К прошлому заданию добавить кнопку создания новой модели.
1. При ее нажатии раскрывается секция с формой и canvas c three.js.
1. В форме присутствуют поля необходимые для заполнения документа в коллекции в базе данных. Для создания новой модели требуется выбрать минимум: тип объекта из 2-х вариантов или более вариантов (куб, сфера или другие), их базовую характеристику и цвет.
1. В конце формы есть кнопка для сохранения модели. Если в памяти есть идентификатор \_id модели, тогда используем конечную точку c методом PUT/PATCH в зависимости от вашей реализации, если же нет \_id, то используем - POST.
1. Внизу страницы должен быть canvas с подключенным к нему отрисовщиком из three.js. Для загрузки данных и их отображения на сцене используйте [ObjectLoader](https://threejs.org/docs/?q=objectload#api/en/loaders/ObjectLoader) класс.
1. Для сохранения объекта в формате JSON используйте на его экземпляре метод [.toJSON()](https://threejs.org/docs/#api/en/core/Object3D.toJSON) и этот метод лучше вызывать при событии submit на форме. В этой работе проще на сервере хранить только информацию о mesh (geometry + material), а сцену, освещение, камеру сделать одинаковой для всех.
1. Модель в сцене логичнее обновлять когда поле, с которым взаимодействовал пользователь потеряло фокус.

### Существующая модель

1. Если была нажата кнопка для просмотра модели в таблице, то полученные с сервера данные вы добавляете в форму в качестве значений.
1. В Three.js с помощью класса [ObjectLoader](https://threejs.org/docs/?q=objectload#api/en/loaders/ObjectLoader) добавляется объект из пришедшего с сервера ответа в сцену.
1. В конце формы есть кнопка для сохранения модели. Если в памяти есть идентификатор \_id модели, тогда используем конечную точку c методом PUT/PATCH в зависимости от вашей реализации, если же нет \_id, то используем - POST.
1. Для сохранения объекта в формате JSON используйте на его экземпляре метод [.toJSON()](https://threejs.org/docs/#api/en/core/Object3D.toJSON) и этот метод лучше вызывать при событии submit на форме. В этой работе проще на сервере хранить только информацию о mesh (geometry + material), а сцену, освещение, камеру сделать одинаковой для всех.
1. Модель в сцене логичнее обновлять когда поле, с которым взаимодействовал пользователь потеряло фокус.

## Результаты выполнения лабораторной работы

1. Финальный вариант приложения.
1. Работающий локально сервер с подключением к бд и логикой, которая соответствует требованиям. Код сохранен в системе контроля версий.
1. Статическая страница, которая с помощью AJAX взаимодействует с сервером.

## Вопросы

Проверяется только работа веб-приложения.
